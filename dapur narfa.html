<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dapur Narfa - Dashboard Full Final</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #000; color: white; font-family: 'Inter', sans-serif; overflow: hidden; }
        .sidebar-item { transition: 0.3s; cursor: pointer; border-radius: 8px; color: #71717a; }
        .sidebar-item:hover { color: white; background-color: #18181b; }
        .active-menu { background-color: white !important; color: black !important; font-weight: bold; }
        .hidden { display: none; }
        .animate-fadeIn { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body class="flex h-screen">

    <aside class="w-64 border-r border-zinc-800 p-6 flex flex-col shrink-0">
        <div class="flex items-center space-x-3 mb-10 text-orange-400 font-bold">
            <div class="w-10 h-10 bg-red-900 rounded-full flex items-center justify-center border border-orange-500 shadow-[0_0_15px_rgba(234,88,12,0.3)]">DN</div>
            <span class="tracking-tight text-lg">Dapur Narfa</span>
        </div>
        
        <nav class="flex-1 space-y-2 text-sm">
            <div onclick="showPage('katalog')" id="menu-katalog" class="sidebar-item active-menu flex items-center space-x-3 p-3">
                <i class="fas fa-th-large w-5"></i> <span>Katalog</span>
            </div>
            <div onclick="showPage('profil')" id="menu-profil" class="sidebar-item flex items-center space-x-3 p-3">
                <i class="fas fa-user w-5"></i> <span>Profil</span>
            </div>
            <div onclick="showPage('beranda')" id="menu-beranda" class="sidebar-item flex items-center space-x-3 p-3">
                <i class="fas fa-home w-5"></i> <span>Beranda</span>
            </div>
            <div onclick="showPage('pengaturan')" id="menu-pengaturan" class="sidebar-item flex items-center space-x-3 p-3">
                <i class="fas fa-cog w-5"></i> <span>Pengaturan</span>
            </div>
            <div onclick="showPage('pesanan')" id="menu-pesanan" class="sidebar-item flex items-center space-x-3 p-3">
                <i class="fas fa-receipt w-5"></i> <span>Pesanan</span>
            </div>
        </nav>

        <button onclick="window.location.reload()" class="text-zinc-500 p-3 text-sm mt-auto text-left hover:text-red-500 transition">
            <i class="fas fa-sign-out-alt mr-2"></i> Log out
        </button>
    </aside>

    <main class="flex-1 flex flex-col relative bg-black">
        <header class="p-6 border-b border-zinc-800 flex justify-between items-center bg-black/50 backdrop-blur-md sticky top-0 z-10">
            <div class="relative w-2/3">
                <i class="fas fa-search absolute left-4 top-3 text-zinc-500 text-xs"></i>
                <input type="text" id="search-input" onkeyup="cariMenu()" placeholder="Cari menu favoritmu..." class="bg-zinc-900 border border-zinc-800 rounded-full py-2 pl-12 pr-4 w-full focus:outline-none focus:border-orange-500 text-sm transition-all">
            </div>
            <div class="flex space-x-4 text-zinc-500">
                <i class="fas fa-sliders-h cursor-pointer hover:text-white"></i>
                <i class="fas fa-bell cursor-pointer hover:text-white"></i>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-8">
            <section id="page-katalog">
                <div id="container-produk" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
            </section>

            <section id="page-profil" class="hidden animate-fadeIn">
                <div class="max-w-2xl mx-auto">
                    <h2 class="text-2xl font-bold mb-8 text-orange-400">Pengaturan Profil</h2>
                    <div class="bg-zinc-900 border border-zinc-800 rounded-2xl p-8 space-y-6 shadow-xl">
                        <div class="flex items-center space-x-6 pb-6 border-b border-zinc-800">
                            <div class="w-24 h-24 rounded-full overflow-hidden border-2 border-orange-500 shadow-lg">
                                <img id="profile-img-center" src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400" class="w-full h-full object-cover">
                            </div>
                            <div>
                                <p id="profile-name-display" class="font-bold text-xl">Azizy</p>
                                <p class="text-zinc-500 text-sm italic">Pemilik Dapur Narfa</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-zinc-500 text-[10px] uppercase font-bold mb-2 tracking-widest">Nama Lengkap</label>
                                <input type="text" id="edit-nama" class="w-full bg-black border border-zinc-800 rounded-lg py-2 px-4 text-sm focus:border-orange-500 outline-none transition">
                            </div>
                            <div>
                                <label class="block text-zinc-500 text-[10px] uppercase font-bold mb-2 tracking-widest">Nomor Telepon</label>
                                <input type="text" id="edit-telp" class="w-full bg-black border border-zinc-800 rounded-lg py-2 px-4 text-sm focus:border-orange-500 outline-none transition">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-zinc-500 text-[10px] uppercase font-bold mb-2 tracking-widest">Alamat Toko</label>
                                <textarea id="edit-alamat" class="w-full bg-black border border-zinc-800 rounded-lg py-2 px-4 text-sm focus:border-orange-500 outline-none h-24 resize-none transition"></textarea>
                            </div>
                            <div class="pt-4">
                                <button onclick="simpanProfil()" class="bg-orange-500 text-black font-extrabold py-3 px-8 rounded-xl text-xs uppercase hover:bg-orange-400 transition shadow-lg shadow-orange-500/20">
                                    Simpan Perubahan
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="page-beranda" class="hidden animate-fadeIn">
                <div class="relative w-full h-48 rounded-3xl overflow-hidden mb-8 bg-gradient-to-r from-orange-600 to-red-900 shadow-2xl">
                    <div class="absolute inset-0 bg-black/30"></div>
                    <div class="relative z-10 p-8 flex flex-col justify-center h-full">
                        <h1 id="welcome-name" class="text-3xl font-black text-white mb-2 italic">Selamat Datang, Azizy!</h1>
                        <p class="text-orange-100 text-sm max-w-md opacity-80">Dapur Narfa siap melayani pesanan hari ini. Pantau semua transaksi dalam satu dashboard.</p>
                        <div class="mt-4">
                            <button onclick="showPage('katalog')" class="bg-white text-black px-6 py-2 rounded-full font-bold text-[10px] uppercase hover:bg-orange-100 transition shadow-lg">
                                Buka Katalog <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                    <i class="fas fa-utensils absolute right-10 bottom-[-20px] text-[150px] text-white/10 rotate-12"></i>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-zinc-900 border border-zinc-800 p-6 rounded-2xl">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-10 h-10 bg-orange-500/10 rounded-lg flex items-center justify-center text-orange-500"><i class="fas fa-shopping-bag"></i></div>
                            <span class="text-[10px] text-green-500 font-bold">+12%</span>
                        </div>
                        <p class="text-zinc-500 text-[10px] uppercase font-bold tracking-widest">Pesanan Hari Ini</p>
                        <p class="text-2xl font-black">25</p>
                    </div>
                    <div class="bg-zinc-900 border border-zinc-800 p-6 rounded-2xl text-blue-400">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center text-blue-500"><i class="fas fa-chart-line"></i></div>
                            <span class="text-[10px] text-zinc-500 font-bold italic">Stabil</span>
                        </div>
                        <p class="text-zinc-500 text-[10px] uppercase font-bold tracking-widest">Menu Terlaris</p>
                        <p class="text-lg font-black text-white uppercase">Donat Kentang</p>
                    </div>
                    <div class="bg-zinc-900 border border-zinc-800 p-6 rounded-2xl">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center text-green-500"><i class="fas fa-store"></i></div>
                            <div id="status-dot-beranda" class="w-2 h-2 bg-green-500 rounded-full animate-ping"></div>
                        </div>
                        <p class="text-zinc-500 text-[10px] uppercase font-bold tracking-widest">Status Toko</p>
                        <p id="status-text-beranda" class="text-2xl font-black text-green-500 uppercase italic">Buka</p>
                    </div>
                </div>
            </section>

            <section id="page-pengaturan" class="hidden animate-fadeIn">
                <div class="max-w-2xl mx-auto bg-zinc-900 border border-zinc-800 rounded-3xl p-8 shadow-2xl">
                    <h2 class="text-xl font-black mb-8 border-b border-zinc-800 pb-4 flex items-center gap-3">
                        <i class="fas fa-sliders-h text-orange-500"></i> OPERASIONAL TOKO
                    </h2>
                    <div class="space-y-8">
                        <div class="flex items-center justify-between p-4 bg-black rounded-2xl border border-zinc-800">
                            <div>
                                <p class="font-bold text-sm">Status Toko Saat Ini</p>
                                <p class="text-[10px] text-zinc-500">Aktifkan untuk memunculkan label "Buka" di Beranda</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="check-status-toko" checked class="sr-only peer">
                                <div class="w-14 h-7 bg-zinc-800 rounded-full peer peer-checked:bg-green-600 after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:after:translate-x-7 shadow-inner"></div>
                            </label>
                        </div>
                        <div class="grid grid-cols-2 gap-6">
                            <div>
                                <label class="text-[10px] font-black text-zinc-500 uppercase mb-2 block">Mulai Jam</label>
                                <input type="time" value="08:00" class="w-full bg-black border border-zinc-800 rounded-xl p-3 text-sm focus:border-orange-500 outline-none">
                            </div>
                            <div>
                                <label class="text-[10px] font-black text-zinc-500 uppercase mb-2 block">Tutup Jam</label>
                                <input type="time" value="21:00" class="w-full bg-black border border-zinc-800 rounded-xl p-3 text-sm focus:border-orange-500 outline-none">
                            </div>
                        </div>
                        <button onclick="simpanPengaturan()" class="w-full bg-white text-black font-black py-4 rounded-2xl uppercase text-xs tracking-[0.2em] hover:bg-zinc-200 transition">
                            Simpan Pengaturan Toko
                        </button>
                    </div>
                </div>
            </section>
            
            <section id="page-pesanan" class="hidden animate-fadeIn">
                <h2 class="text-xs font-black text-zinc-500 mb-6 uppercase tracking-widest border-l-4 border-orange-500 pl-4">Riwayat Transaksi</h2>
                <div id="container-pesanan" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div id="empty-msg" class="col-span-full text-zinc-600 italic text-sm text-center py-20 border-2 border-dashed border-zinc-800 rounded-3xl">
                        <i class="fas fa-box-open text-3xl mb-4 block"></i> Belum ada riwayat pesanan hari ini.
                    </div>
                </div>
            </section>
        </div>

        <div id="modalDetail" class="hidden fixed inset-0 bg-black/95 backdrop-blur-md flex items-center justify-center z-50 p-4">
            <div class="bg-zinc-950 border border-zinc-800 w-full max-w-4xl h-[550px] flex flex-col md:flex-row overflow-hidden rounded-[2rem] shadow-2xl">
                <div class="flex-1 p-8 flex flex-col items-center justify-center border-r border-zinc-800 bg-zinc-900/20">
                    <img id="modal-img" src="" class="w-64 h-64 object-cover rounded-3xl mb-6 shadow-2xl border border-zinc-700">
                    <h2 id="modal-nama" class="text-2xl font-black uppercase tracking-tight"></h2>
                    <p id="modal-harga" class="text-orange-500 font-black text-xl mt-1"></p>
                </div>
                <div class="w-full md:w-96 p-10 flex flex-col justify-between bg-zinc-900">
                    <div class="space-y-4">
                        <button onclick="closeModal()" class="text-zinc-500 text-[10px] font-black tracking-widest hover:text-white transition uppercase"><i class="fas fa-arrow-left mr-2"></i> Kembali</button>
                        
                        <div>
                            <label class="text-zinc-500 text-[9px] font-black uppercase tracking-widest mb-2 block">Jumlah Pesanan</label>
                            <input type="number" id="modal-jumlah" value="1" min="1" class="w-full bg-black border border-zinc-800 text-white p-3 rounded-xl font-bold outline-none focus:border-orange-500">
                        </div>

                        <div>
                            <label class="text-zinc-500 text-[9px] font-black uppercase tracking-widest mb-2 block">Tipe Pengambilan</label>
                            <select id="modal-tipe" class="w-full bg-black border border-zinc-800 text-white p-3 rounded-xl font-bold outline-none focus:border-orange-500">
                                <option value="DI ANTAR">DI ANTAR (DELIVERY)</option>
                                <option value="DI AMBIL">DI AMBIL (PICKUP)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="text-zinc-500 text-[9px] font-black uppercase tracking-widest mb-2 block">Bukti Pembayaran (Opsional)</label>
                            <input type="file" id="modal-bukti" class="w-full text-xs text-zinc-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-[10px] file:font-black file:bg-zinc-800 file:text-white">
                        </div>

                        <div>
                            <label class="text-zinc-500 text-[9px] font-black uppercase tracking-widest mb-2 block">Alamat / Catatan</label>
                            <textarea id="modal-alamat" class="w-full h-20 text-[11px] bg-black/50 p-3 rounded-xl border border-zinc-800 outline-none resize-none focus:border-orange-500"></textarea>
                        </div>
                    </div>
                    <button onclick="konfirmasiPesanan()" class="bg-orange-600 hover:bg-orange-500 text-white font-black py-4 rounded-2xl uppercase text-xs tracking-[0.2em] transition shadow-lg shadow-orange-900/40 mt-4">
                        KONFIRMASI PESANAN
                    </button>
                </div>
            </div>
        </div>
    </main>

    <aside class="w-72 border-l border-zinc-800 p-6 flex flex-col items-center bg-zinc-950/50 backdrop-blur-sm">
        <div class="bg-zinc-900 p-1.5 rounded-2xl mb-10 flex items-center gap-4 border border-zinc-800">
             <div class="bg-orange-500 px-3 py-1.5 rounded-xl text-black text-[10px] font-black flex items-center gap-2">
                <i class="fas fa-shopping-cart"></i> 25
            </div>
            <p class="text-[9px] font-bold text-zinc-500 pr-3 uppercase">Total Sales</p>
        </div>
        
        <div class="text-center group">
            <div class="w-24 h-24 rounded-full mx-auto mb-4 border-2 border-zinc-700 overflow-hidden shadow-2xl group-hover:border-orange-500 transition-all duration-500">
                <img id="profile-img-right" src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=200" class="w-full h-full object-cover">
            </div>
            <p id="user-display-right" class="font-black text-lg tracking-tight uppercase">Azizy</p>
            <p id="user-location-right" class="text-[10px] text-zinc-500 font-bold uppercase tracking-[0.2em] mt-1">Jenu, Tuban</p>
            <div class="w-10 h-1 bg-orange-500 mx-auto mt-4 rounded-full"></div>
        </div>

        <div class="mt-12 w-full space-y-4">
            <p class="text-[9px] font-black text-zinc-600 uppercase tracking-widest mb-2">Shortcut</p>
            <div onclick="showPage('pesanan')" class="bg-zinc-900/50 p-4 rounded-2xl border border-zinc-800 hover:border-zinc-600 cursor-pointer transition">
                <p class="text-[10px] font-bold">Cek Riwayat</p>
                <p class="text-[8px] text-zinc-500 uppercase mt-1">Last order 5m ago</p>
            </div>
        </div>
    </aside>

    <script>
        const dataProduk = [
            { n: "Donat Kentang", h: "Rp. 3.000", f: "donatkentang.jpg" },
            { n: "Kue Pukis", h: "Rp. 3.000", f: "kue pukis.jpg" },
            { n: "Sosis Solo", h: "Rp. 5.800", f: "sosis solo.jpg" },
            { n: "Nona Manis", h: "Rp. 7.800", f: "nona manis.jpg" },
            { n: "Bolu Pisang", h: "Rp. 2.500", f: "bolu pisang.jpg" },
            { n: "Donat Toping", h: "Rp. 3.500", f: "donat toping.jpg" },
            { n: "Lapis Surabaya", h: "Rp. 30.000", f: "kue lapis surabaya.jpg" },
            { n: "Onde Onde", h: "Rp. 2.000", f: "onde onde.jpg" },
            { n: "Pie Buah", h: "Rp. 5.500", f: "pie buah.jpg" }
        ];

        let produkTerpilih = {};

        function showPage(id) {
            ['katalog', 'profil', 'beranda', 'pengaturan', 'pesanan'].forEach(p => {
                document.getElementById('page-' + p).classList.add('hidden');
                document.getElementById('menu-' + p).classList.remove('active-menu');
            });
            document.getElementById('page-' + id).classList.remove('hidden');
            document.getElementById('menu-' + id).classList.add('active-menu');
        }

        function renderProduk(filter = "") {
            const container = document.getElementById('container-produk');
            const list = filter === "" ? dataProduk : dataProduk.filter(p => p.n.toLowerCase().includes(filter.toLowerCase()));
            
            container.innerHTML = list.map(p => `
                <div onclick="openModal('${p.n}', '${p.h}', '${p.f}')" class="bg-zinc-900 rounded-3xl overflow-hidden cursor-pointer hover:border-orange-500 border border-zinc-800 transition-all duration-300 animate-fadeIn shadow-lg group">
                    <div class="relative overflow-hidden h-36">
                        <img src="${p.f}" class="w-full h-full object-cover group-hover:scale-110 transition duration-500">
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold text-xs uppercase tracking-tight truncate">${p.n}</h4>
                        <p class="text-orange-500 font-black text-sm mt-1">${p.h}</p>
                    </div>
                </div>
            `).join('');
        }

        function cariMenu() {
            const val = document.getElementById('search-input').value;
            renderProduk(val);
        }

        function openModal(n, h, f) {
            produkTerpilih = { n, h, f };
            document.getElementById('modal-nama').innerText = n;
            document.getElementById('modal-harga').innerText = h;
            document.getElementById('modal-img').src = f;
            document.getElementById('modalDetail').classList.remove('hidden');
        }

        function closeModal() { document.getElementById('modalDetail').classList.add('hidden'); }

        function konfirmasiPesanan() {
            const jml = document.getElementById('modal-jumlah').value;
            const tipe = document.getElementById('modal-tipe').value;
            const almt = document.getElementById('modal-alamat').value;
            const buktiFile = document.getElementById('modal-bukti').files[0];
            const hargaAngka = parseInt(produkTerpilih.h.replace(/[^0-9]/g, ''));
            const total = (hargaAngka * jml).toLocaleString('id-ID');
            
            let buktiUrl = "";
            if(buktiFile) buktiUrl = URL.createObjectURL(buktiFile);

            const card = `
                <div class="bg-zinc-900/50 border border-zinc-800 p-5 rounded-[2rem] flex flex-col animate-fadeIn shadow-xl">
                    <div class="flex gap-4">
                        <img src="${produkTerpilih.f}" class="w-20 h-20 object-cover rounded-2xl border border-zinc-700">
                        <div class="flex-1">
                            <div class="flex justify-between items-start">
                                <h4 class="font-black text-white text-sm uppercase tracking-tight">${produkTerpilih.n}</h4>
                                <span class="bg-orange-600 text-black text-[8px] px-2 py-0.5 rounded font-black">${tipe}</span>
                            </div>
                            <p class="text-zinc-500 text-xs mt-1"><span class="text-white font-bold">${jml} PCS</span> x ${produkTerpilih.h}</p>
                            <p class="text-orange-500 font-black text-lg mt-1">Rp ${total}</p>
                        </div>
                    </div>
                    <p class="text-zinc-600 text-[9px] mt-4 italic bg-black/30 p-2 rounded-xl border border-zinc-800"><i class="fas fa-map-marker-alt mr-1"></i> ${almt}</p>
                    ${buktiUrl ? `<img src="${buktiUrl}" class="mt-4 w-full h-32 object-cover rounded-xl border border-zinc-700">` : ''}
                </div>
            `;

            const container = document.getElementById('container-pesanan');
            if (document.getElementById('empty-msg')) document.getElementById('empty-msg').remove();
            container.insertAdjacentHTML('afterbegin', card);
            closeModal();
            showPage('pesanan');
        }

        function simpanProfil() {
            const nama = document.getElementById('edit-nama').value;
            const telp = document.getElementById('edit-telp').value;
            const alamat = document.getElementById('edit-alamat').value;
            
            localStorage.setItem('dn_nama', nama);
            localStorage.setItem('dn_telp', telp);
            localStorage.setItem('dn_alamat', alamat);
            
            updateTampilanProfil(nama, alamat);
            alert('Profil Azizy Berhasil Diperbarui!');
        }

        function updateTampilanProfil(nama, alamat) {
            document.getElementById('user-display-right').innerText = nama;
            document.getElementById('profile-name-display').innerText = nama;
            document.getElementById('welcome-name').innerText = "Selamat Datang, " + nama + "!";
            document.getElementById('user-location-right').innerText = alamat.split(',')[0]; // Ambil bagian depan alamat saja
        }

        function simpanPengaturan() {
            const status = document.getElementById('check-status-toko').checked ? 'Buka' : 'Tutup';
            localStorage.setItem('dn_status', status);
            updateTampilanStatus(status);
            alert('Status Toko Sekarang: ' + status);
            showPage('beranda');
        }

        function updateTampilanStatus(status) {
            const txt = document.getElementById('status-text-beranda');
            const dot = document.getElementById('status-dot-beranda');
            txt.innerText = status;
            if(status === 'Buka') {
                txt.className = "text-2xl font-black text-green-500 uppercase italic";
                dot.classList.remove('hidden');
            } else {
                txt.className = "text-2xl font-black text-red-500 uppercase italic";
                dot.classList.add('hidden');
            }
        }

        window.onload = function() {
            renderProduk();
            const n = localStorage.getItem('dn_nama') || 'Azizy';
            const t = localStorage.getItem('dn_telp') || '+62 812 3456 7890';
            const a = localStorage.getItem('dn_alamat') || 'Jenu, Tuban';
            const s = localStorage.getItem('dn_status') || 'Buka';

            document.getElementById('edit-nama').value = n;
            document.getElementById('edit-telp').value = t;
            document.getElementById('edit-alamat').value = a;
            document.getElementById('modal-alamat').value = a;
            
            updateTampilanProfil(n, a);
            updateTampilanStatus(s);
            document.getElementById('check-status-toko').checked = (s === 'Buka');
        };
    </script>
</body>
</html>